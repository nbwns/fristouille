<template>
  <section class="flex flex-col justify-center items-center layer__2xl mx-auto">
	<spacer class=" h-24 lg:h-28 "></spacer>
	<div class="flex flex-col layer__xl !p-0 w-full">
		<div class=" w-full block md:hidden absolute top-16 right-5">
			<div class="w-36 ml-auto -rotate-6">
				<svg width="100%" height="100%" viewBox="0 0 200 307" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M140.723 154.109C138.84 153.907 137.035 152.738 135.283 150.623L122 134.597L126.414 130.939L139.443 146.659C140.161 147.526 140.838 148.039 141.54 148.231C142.243 148.422 142.982 148.153 143.85 147.434C144.346 147.023 144.75 146.602 145.037 146.192L148.247 150.065C147.63 150.834 146.946 151.573 146.102 152.272C144.391 153.69 142.605 154.311 140.723 154.109Z" fill="#190B1A"/>
				<path d="M40.7352 147.109C42.6177 146.907 44.4228 145.738 46.1755 143.623L59.4581 127.597L55.0443 123.939L42.0152 139.659C41.2972 140.526 40.6205 141.039 39.918 141.231C39.2156 141.422 38.4763 141.153 37.6084 140.434C37.1125 140.023 36.7084 139.602 36.4209 139.192L33.2111 143.065C33.8283 143.834 34.5126 144.573 35.3556 145.272C37.0666 146.69 38.8528 147.311 40.7352 147.109Z" fill="#190B1A"/>
				<ellipse cx="173.5" cy="27" rx="26.5" ry="27" fill="#6587FF"/>
				<path d="M104.396 194.319C102.535 193.797 100.993 192.821 99.7281 191.448C98.5212 190.114 97.7081 188.462 97.3555 186.58C97.0843 185.132 96.9846 183.255 97.0257 181.055L97.9248 151.442L106.492 151.738L105.553 181.407C105.551 182.205 105.647 182.986 105.765 183.613C106.009 184.916 106.695 185.893 107.767 186.503C108.838 187.113 110.138 187.334 111.699 187.061L112.772 186.873L112.464 194.104C111.848 194.311 111.126 194.488 110.346 194.624C108.249 194.991 106.265 194.889 104.396 194.319Z" fill="#190B1A"/>
				<ellipse cx="91.4794" cy="125.963" rx="38.4794" ry="38.9633" fill="url(#paint0_linear_1814_2683)"/>
				<path d="M52.1718 180.253C51.7939 177.438 52.8521 174.39 55.3077 171.08L73.9172 146L80.8246 151.125L62.5701 175.727C61.5642 177.083 61.0573 178.252 61.0293 179.344C61.0012 180.436 61.657 181.417 63.0152 182.425C63.7913 183.001 64.549 183.44 65.2494 183.712L60.7523 189.773C59.4107 189.148 58.0894 188.415 56.77 187.436C54.0924 185.449 52.5498 183.068 52.1718 180.253Z" fill="#190B1A"/>
				<path d="M96.6025 125.412C98.5777 125.118 100.448 124.122 101.842 122.481L100.429 121.178C98.3512 123.598 94.9028 124.232 92.1587 122.689L91.2729 124.414C92.9377 125.361 94.8137 125.679 96.6025 125.412Z" fill="#190B1A"/>
				<path d="M82.9829 111.041C81.3355 111.041 80 109.689 80 108.02C80 106.352 81.3355 105 82.9829 105C84.6303 105 85.9658 106.352 85.9658 108.02C85.9658 109.689 84.6303 111.041 82.9829 111.041Z" fill="#190B1A"/>
				<path d="M100 107.718C100 109.204 101.181 110.437 102.685 110.437C104.188 110.437 105.369 109.241 105.369 107.718C105.369 106.232 104.188 105 102.685 105C101.181 105 100 106.232 100 107.718Z" fill="#190B1A"/>
				<path d="M170.026 13.513C169.459 6.33546 178.295 7.99181 182.784 9.71718C184.556 2.1257 191.009 7.88745 194.125 11.7874C199.086 17.9987 200.858 26.6257 196.605 25.2454C195.422 24.8614 194.678 24.3173 194.228 23.7764C194.343 27.5592 193.536 37.1093 188 42.5C181.621 48.7113 182.784 41.4507 182.784 38C182.784 34.5 171.798 27.9108 170.026 24C167.663 22.0446 170.593 20.6905 170.026 13.513Z" fill="#A4CD88"/>
				<path d="M159.204 16.2782C161.518 12.8376 158.24 9.99248 156.311 9C148.717 12.6391 145.101 27.5264 147.994 25.8722C148.356 22.8948 147.994 22.5639 150.525 21.9023C153.057 21.2406 156.311 20.579 159.204 16.2782Z" fill="#A4CD88"/>
				<path d="M151.774 39.5228C150.026 37.4923 151.308 41.8916 154.921 43.9221V45.2758C156.32 46.5166 159.887 49.472 162.964 51.367C166.81 53.7359 171.006 51.7054 173.105 52.7207C174.783 53.5328 177.068 52.3823 178 51.7054C176.951 51.4798 174.363 50.8933 172.405 50.3518C169.957 49.675 169.258 48.6598 165.062 47.6446C161.705 46.8324 161.565 45.727 161.915 45.2758C161.099 43.9221 153.523 41.5533 151.774 39.5228Z" fill="#A4CD88"/>
				<path d="M43.222 70.0351L66.5 96C77.7 87.2 84.5 87 93 87L78.722 52.5352C99.222 47.5352 88.222 1.03495 72.722 0.0349481C60.322 -0.765052 57.8887 12.3684 58.222 19.0351C53.222 14.7018 40.522 7.1351 29.722 11.5351C18.922 15.9351 18.222 28.7018 19.222 34.5351C7.22198 34.5351 2.22198 56.0351 12.722 70.0351C21.122 81.2351 36.5553 74.7018 43.222 70.0351Z" fill="white"/>
				<path d="M21.5971 61.5C15.0971 57 16.5972 45 21.5971 37C0.597217 48.5 9.59723 69 21.5971 73C32.5994 76.6674 39.2639 68.3333 44.0972 63.5C44.0972 63.5 29.5971 67.0384 21.5971 61.5Z" fill="#F3E9F4"/>
				<path d="M59.5 54.5C33.5 50.5 30.3333 25.5 32 13.5C27.5 20.3333 20.6 37 29 49C37.4 61 52.8333 57.6667 59.5 54.5Z" fill="#F3E9F4"/>
				<path d="M71 2C67.8334 5.16667 61.5 14 61.5 24C59.5 18 58.6 5.2 71 2Z" fill="#F3E9F4"/>
				<path d="M37 187.5C46.8334 205.5 79.9 240.9 133.5 238.5C200.5 235.5 74.5 198.5 43.5 218.5C12.5 238.5 76 283.5 133.5 276C191 268.5 80.0001 247.5 43.5 269.5C26.4395 279.783 30.8986 288.755 43.5 295.089M43.5 295.089C57.8586 302.306 82.7886 306.098 98.5 304.5C128 301.5 85 293.178 43.5 295.089Z" stroke="url(#paint1_linear_1814_2683)" stroke-width="3" stroke-linecap="round"/>
				<path d="M177.049 86.927C177.348 86.0057 178.652 86.0057 178.951 86.9271L181.368 94.3647C181.502 94.7768 181.886 95.0557 182.319 95.0557H190.139C191.108 95.0557 191.511 96.2953 190.727 96.8647L184.4 101.461C184.05 101.716 183.903 102.168 184.037 102.58L186.454 110.017C186.753 110.939 185.698 111.705 184.915 111.135L178.588 106.539C178.237 106.284 177.763 106.284 177.412 106.539L171.085 111.135C170.302 111.705 169.247 110.939 169.546 110.017L171.963 102.58C172.097 102.168 171.95 101.716 171.6 101.461L165.273 96.8647C164.489 96.2953 164.892 95.0557 165.861 95.0557H173.681C174.114 95.0557 174.498 94.7768 174.632 94.3647L177.049 86.927Z" fill="#FFDB59"/>
				<path d="M12.5489 103.927C12.8483 103.006 14.1517 103.006 14.4511 103.927L16.3064 109.637C16.4403 110.049 16.8243 110.328 17.2575 110.328H23.2616C24.2303 110.328 24.6331 111.568 23.8494 112.137L18.9919 115.666C18.6415 115.921 18.4948 116.372 18.6287 116.784L20.484 122.495C20.7834 123.416 19.7289 124.182 18.9452 123.613L14.0878 120.084C13.7373 119.829 13.2627 119.829 12.9122 120.084L8.0548 123.613C7.27108 124.182 6.2166 123.416 6.51596 122.495L8.37132 116.784C8.5052 116.372 8.35854 115.921 8.00805 115.666L3.15064 112.137C2.36692 111.568 2.7697 110.328 3.73842 110.328H9.74252C10.1757 110.328 10.5597 110.049 10.6936 109.637L12.5489 103.927Z" fill="#FFDB59"/>
				<path d="M152.549 226.927C152.848 226.006 154.152 226.006 154.451 226.927L155.633 230.564C155.767 230.976 156.151 231.255 156.584 231.255H160.408C161.377 231.255 161.78 232.495 160.996 233.064L157.902 235.312C157.552 235.567 157.405 236.018 157.539 236.43L158.721 240.068C159.02 240.989 157.966 241.755 157.182 241.186L154.088 238.938C153.737 238.683 153.263 238.683 152.912 238.938L149.818 241.186C149.034 241.755 147.98 240.989 148.279 240.068L149.461 236.43C149.595 236.018 149.448 235.567 149.098 235.312L146.004 233.064C145.22 232.495 145.623 231.255 146.592 231.255H150.416C150.849 231.255 151.233 230.976 151.367 230.564L152.549 226.927Z" fill="#FFDB59"/>
				<defs>
				<linearGradient id="paint0_linear_1814_2656" x1="106.068" y1="185.922" x2="91.5676" y2="47.4224" gradientUnits="userSpaceOnUse">
				<stop offset="0.234375" stop-color="#FFADA8"/>
				<stop offset="1" stop-color="#D450D7"/>
				</linearGradient>
				<linearGradient id="paint1_linear_1814_2656" x1="92.5842" y1="187.5" x2="92.5842" y2="304.862" gradientUnits="userSpaceOnUse">
				<stop stop-color="#FF794E"/>
				<stop offset="1" stop-color="#DF46E2"/>
				</linearGradient>
				</defs>
				</svg>
			</div>
		</div>
		<!--  page title -->
		<h1 class="max-w-md">
			<prismic-text :field="document.data.title" />
		 </h1>
		 <spacer class="h-10"></spacer>
				<!-- body  -->
			<div class="flex flex-grow flex-col md:flex-row-reverse justify-center">
				<div class=" w-full lg:w-1/2 lg:-mt-16 hidden md:block">
					<div class="w-48 md:w-72 mx-auto">
						<svg width="100%" height="100%" viewBox="0 0 200 307" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M140.723 154.109C138.84 153.907 137.035 152.738 135.283 150.623L122 134.597L126.414 130.939L139.443 146.659C140.161 147.526 140.838 148.039 141.54 148.231C142.243 148.422 142.982 148.153 143.85 147.434C144.346 147.023 144.75 146.602 145.037 146.192L148.247 150.065C147.63 150.834 146.946 151.573 146.102 152.272C144.391 153.69 142.605 154.311 140.723 154.109Z" fill="#190B1A"/>
						<path d="M40.7352 147.109C42.6177 146.907 44.4228 145.738 46.1755 143.623L59.4581 127.597L55.0443 123.939L42.0152 139.659C41.2972 140.526 40.6205 141.039 39.918 141.231C39.2156 141.422 38.4763 141.153 37.6084 140.434C37.1125 140.023 36.7084 139.602 36.4209 139.192L33.2111 143.065C33.8283 143.834 34.5126 144.573 35.3556 145.272C37.0666 146.69 38.8528 147.311 40.7352 147.109Z" fill="#190B1A"/>
						<ellipse cx="173.5" cy="27" rx="26.5" ry="27" fill="#6587FF"/>
						<path d="M104.396 194.319C102.535 193.797 100.993 192.821 99.7281 191.448C98.5212 190.114 97.7081 188.462 97.3555 186.58C97.0843 185.132 96.9846 183.255 97.0257 181.055L97.9248 151.442L106.492 151.738L105.553 181.407C105.551 182.205 105.647 182.986 105.765 183.613C106.009 184.916 106.695 185.893 107.767 186.503C108.838 187.113 110.138 187.334 111.699 187.061L112.772 186.873L112.464 194.104C111.848 194.311 111.126 194.488 110.346 194.624C108.249 194.991 106.265 194.889 104.396 194.319Z" fill="#190B1A"/>
						<ellipse cx="91.4794" cy="125.963" rx="38.4794" ry="38.9633" fill="url(#paint0_linear_1814_2683)"/>
						<path d="M52.1718 180.253C51.7939 177.438 52.8521 174.39 55.3077 171.08L73.9172 146L80.8246 151.125L62.5701 175.727C61.5642 177.083 61.0573 178.252 61.0293 179.344C61.0012 180.436 61.657 181.417 63.0152 182.425C63.7913 183.001 64.549 183.44 65.2494 183.712L60.7523 189.773C59.4107 189.148 58.0894 188.415 56.77 187.436C54.0924 185.449 52.5498 183.068 52.1718 180.253Z" fill="#190B1A"/>
						<path d="M96.6025 125.412C98.5777 125.118 100.448 124.122 101.842 122.481L100.429 121.178C98.3512 123.598 94.9028 124.232 92.1587 122.689L91.2729 124.414C92.9377 125.361 94.8137 125.679 96.6025 125.412Z" fill="#190B1A"/>
						<path d="M82.9829 111.041C81.3355 111.041 80 109.689 80 108.02C80 106.352 81.3355 105 82.9829 105C84.6303 105 85.9658 106.352 85.9658 108.02C85.9658 109.689 84.6303 111.041 82.9829 111.041Z" fill="#190B1A"/>
						<path d="M100 107.718C100 109.204 101.181 110.437 102.685 110.437C104.188 110.437 105.369 109.241 105.369 107.718C105.369 106.232 104.188 105 102.685 105C101.181 105 100 106.232 100 107.718Z" fill="#190B1A"/>
						<path d="M170.026 13.513C169.459 6.33546 178.295 7.99181 182.784 9.71718C184.556 2.1257 191.009 7.88745 194.125 11.7874C199.086 17.9987 200.858 26.6257 196.605 25.2454C195.422 24.8614 194.678 24.3173 194.228 23.7764C194.343 27.5592 193.536 37.1093 188 42.5C181.621 48.7113 182.784 41.4507 182.784 38C182.784 34.5 171.798 27.9108 170.026 24C167.663 22.0446 170.593 20.6905 170.026 13.513Z" fill="#A4CD88"/>
						<path d="M159.204 16.2782C161.518 12.8376 158.24 9.99248 156.311 9C148.717 12.6391 145.101 27.5264 147.994 25.8722C148.356 22.8948 147.994 22.5639 150.525 21.9023C153.057 21.2406 156.311 20.579 159.204 16.2782Z" fill="#A4CD88"/>
						<path d="M151.774 39.5228C150.026 37.4923 151.308 41.8916 154.921 43.9221V45.2758C156.32 46.5166 159.887 49.472 162.964 51.367C166.81 53.7359 171.006 51.7054 173.105 52.7207C174.783 53.5328 177.068 52.3823 178 51.7054C176.951 51.4798 174.363 50.8933 172.405 50.3518C169.957 49.675 169.258 48.6598 165.062 47.6446C161.705 46.8324 161.565 45.727 161.915 45.2758C161.099 43.9221 153.523 41.5533 151.774 39.5228Z" fill="#A4CD88"/>
						<path d="M43.222 70.0351L66.5 96C77.7 87.2 84.5 87 93 87L78.722 52.5352C99.222 47.5352 88.222 1.03495 72.722 0.0349481C60.322 -0.765052 57.8887 12.3684 58.222 19.0351C53.222 14.7018 40.522 7.1351 29.722 11.5351C18.922 15.9351 18.222 28.7018 19.222 34.5351C7.22198 34.5351 2.22198 56.0351 12.722 70.0351C21.122 81.2351 36.5553 74.7018 43.222 70.0351Z" fill="white"/>
						<path d="M21.5971 61.5C15.0971 57 16.5972 45 21.5971 37C0.597217 48.5 9.59723 69 21.5971 73C32.5994 76.6674 39.2639 68.3333 44.0972 63.5C44.0972 63.5 29.5971 67.0384 21.5971 61.5Z" fill="#F3E9F4"/>
						<path d="M59.5 54.5C33.5 50.5 30.3333 25.5 32 13.5C27.5 20.3333 20.6 37 29 49C37.4 61 52.8333 57.6667 59.5 54.5Z" fill="#F3E9F4"/>
						<path d="M71 2C67.8334 5.16667 61.5 14 61.5 24C59.5 18 58.6 5.2 71 2Z" fill="#F3E9F4"/>
						<path d="M37 187.5C46.8334 205.5 79.9 240.9 133.5 238.5C200.5 235.5 74.5 198.5 43.5 218.5C12.5 238.5 76 283.5 133.5 276C191 268.5 80.0001 247.5 43.5 269.5C26.4395 279.783 30.8986 288.755 43.5 295.089M43.5 295.089C57.8586 302.306 82.7886 306.098 98.5 304.5C128 301.5 85 293.178 43.5 295.089Z" stroke="url(#paint1_linear_1814_2683)" stroke-width="3" stroke-linecap="round"/>
						<path d="M177.049 86.927C177.348 86.0057 178.652 86.0057 178.951 86.9271L181.368 94.3647C181.502 94.7768 181.886 95.0557 182.319 95.0557H190.139C191.108 95.0557 191.511 96.2953 190.727 96.8647L184.4 101.461C184.05 101.716 183.903 102.168 184.037 102.58L186.454 110.017C186.753 110.939 185.698 111.705 184.915 111.135L178.588 106.539C178.237 106.284 177.763 106.284 177.412 106.539L171.085 111.135C170.302 111.705 169.247 110.939 169.546 110.017L171.963 102.58C172.097 102.168 171.95 101.716 171.6 101.461L165.273 96.8647C164.489 96.2953 164.892 95.0557 165.861 95.0557H173.681C174.114 95.0557 174.498 94.7768 174.632 94.3647L177.049 86.927Z" fill="#FFDB59"/>
						<path d="M12.5489 103.927C12.8483 103.006 14.1517 103.006 14.4511 103.927L16.3064 109.637C16.4403 110.049 16.8243 110.328 17.2575 110.328H23.2616C24.2303 110.328 24.6331 111.568 23.8494 112.137L18.9919 115.666C18.6415 115.921 18.4948 116.372 18.6287 116.784L20.484 122.495C20.7834 123.416 19.7289 124.182 18.9452 123.613L14.0878 120.084C13.7373 119.829 13.2627 119.829 12.9122 120.084L8.0548 123.613C7.27108 124.182 6.2166 123.416 6.51596 122.495L8.37132 116.784C8.5052 116.372 8.35854 115.921 8.00805 115.666L3.15064 112.137C2.36692 111.568 2.7697 110.328 3.73842 110.328H9.74252C10.1757 110.328 10.5597 110.049 10.6936 109.637L12.5489 103.927Z" fill="#FFDB59"/>
						<path d="M152.549 226.927C152.848 226.006 154.152 226.006 154.451 226.927L155.633 230.564C155.767 230.976 156.151 231.255 156.584 231.255H160.408C161.377 231.255 161.78 232.495 160.996 233.064L157.902 235.312C157.552 235.567 157.405 236.018 157.539 236.43L158.721 240.068C159.02 240.989 157.966 241.755 157.182 241.186L154.088 238.938C153.737 238.683 153.263 238.683 152.912 238.938L149.818 241.186C149.034 241.755 147.98 240.989 148.279 240.068L149.461 236.43C149.595 236.018 149.448 235.567 149.098 235.312L146.004 233.064C145.22 232.495 145.623 231.255 146.592 231.255H150.416C150.849 231.255 151.233 230.976 151.367 230.564L152.549 226.927Z" fill="#FFDB59"/>
						<defs>
						<linearGradient id="paint0_linear_1814_2683" x1="106.068" y1="185.922" x2="91.5676" y2="47.4224" gradientUnits="userSpaceOnUse">
						<stop offset="0.234375" stop-color="#FFADA8"/>
						<stop offset="1" stop-color="#D450D7"/>
						</linearGradient>
						<linearGradient id="paint1_linear_1814_2683" x1="92.5842" y1="187.5" x2="92.5842" y2="304.862" gradientUnits="userSpaceOnUse">
						<stop stop-color="#FF794E"/>
						<stop offset="1" stop-color="#DF46E2"/>
						</linearGradient>
						</defs>
						</svg>
					</div>
				</div>
				<div class="text-left w-full lg:w-1/2 self-center">
					<prismic-rich-text :field="document.data.text"/>
				</div>
			</div>
		<spacer h="125"></spacer>
	</div>			
		<!-- child pages  -->
	 		<grid-of-cards-articles :articles="children"/>
	 <spacer h="275"></spacer>
  </section>
</template>

<script>
import GridOfCardsArticles from '~/components/GridOfCardsArticles.vue'
import Spacer from '~/molecules/Spacer.vue'
export default {
  name: 'post',
  components: {
	GridOfCardsArticles,
	Spacer
  },
  head () {
    return {
		title: this.document.data.meta_title,
		meta: [
					{
						hid: 'description',
						name: 'description',
						content: this.document.data.meta_description
					},
					{
						hid: 'og:title',
						name: 'og:title',
						content: this.document.data.meta_title
					},
					{
						hid: 'og:description',
						name: 'og:description',
						content: this.document.data.meta_description
					},
					{
						hid: 'og:image',
						name: 'og:image',
						content: this.document.data.facebook_image.url
					},
					{
						hid: 'og:url',
						name: 'og:url',
						content: `https://www.fristouille.org${this.document.url}` 
					}
				]
    }
  },
  async asyncData({ $prismic, params, error }) {
    try{
	 
	 	// Query to get post content
    	const page = (await $prismic.api.getByUID('simplepage', params.section))
	 	// Get child pages
		const children = (await $prismic.api.query( 
				$prismic.predicates.at('my.childpage.parent_page', page.id) 
			)).results

		console.log(children);

      // Returns data to be used in template
      return {
        document: page,
		children: children
      }
    } catch (e) {
      // Returns error page
	  console.log("error in top page",e);
      error({ statusCode: 404, message: 'Page not found' })
    }
  },
}
</script>